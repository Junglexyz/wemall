(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-18dc"],{"7vFM":function(e,o,t){},NUJx:function(e,o,t){"use strict";t.r(o);var s=t("xA6U"),r=t("xAVR"),a=t("rs3x"),l=t("X4fA"),n={data:function(){return{uploadPath:a.a,goods:{title:"",goodsDescribe:"",sellPrice:0,originPrice:0,cover:"",special:!1},loading:!0,rules:{title:[{required:!0,message:"请输入商品名称",trigger:"blur"}],sellPrice:[{required:!0,validator:function(e,o,t){""===o&&t(new Error("销售价格不为空"));/^[0-9]+([.]{1}[0-9]+){0,1}$/.test(o)?t():t(new Error("输入值必须为小数或整数"))},trigger:"blur"}],cover:[{required:!0,message:"请上传照片",trigger:"blur"}],categoryId:[{required:!0,message:"请选择商品分类",trigger:"blur"}],stock:[{required:!0,message:"请输入库存",trigger:"blur"}]},value:[],options:[],uploadData:{}}},created:function(){this.getCategory()},computed:{headers:function(){return{"X-Upload-Type":"goods","X-Litemall-Admin-Token":Object(l.a)()}}},methods:{xlsbeforeUpload:function(){this.uploadData={categoryId:1e3}},handleAvatarSuccess:function(e){console.log(e)},create:function(e){var o=this;console.log(this.goods),this.goods.special=this.goods.special?1:0,this.$refs[e].validate(function(e){if(console.log(o.goods),!e)return console.log("error submit!!"),!1;console.log(e),Object(s.a)(o.goods).then(function(e){console.log(e),0==e.data.errno&&o.$message({message:"添加成功！",type:"success"})}).catch(function(e){console.log(e),o.$message.error("添加失败！")})})},getCategory:function(){var e=this;Object(r.c)().then(function(o){var t=o.data;if(console.log(t),0==t.errno){for(var s=t.result,r=[],a=0;a<s.length;a++){for(var l=[],n=s[a].children,i=0;i<n.length;i++){var c={label:n[i].name,value:n[i].id};l.push(c)}var u={label:s[a].name,value:s[a].id,children:l};r.push(u)}console.log(r),e.options=r}}).catch(function(o){console.log(o),e.listLoading=!1})},uploadPicUrl:function(e){console.log(e),this.goods.cover=this.$store.getters.storagePath+"/goods/"+e.result,this.loading=!1,console.log(this.goods.cover)},resetForm:function(e){this.$refs[e].resetFields()},beforeUpload:function(e){var o="image/jpg"===e.type||"image/png"===e.type||"image/jpeg"===e.type,t=e.size/1024/1024<2;return o||this.$message.error("上传头像图片只能是 JPG 或 PNG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),this.loading=!0,o&&t},handleChange:function(e){console.log(e),this.goods.categoryId=e[1]}}},i=(t("PFre"),t("ZrdR")),c=Object(i.a)(n,function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"app-container"},[t("h4",[e._v("创建商品")]),e._v(" "),t("el-card",[t("el-upload",{attrs:{action:"http://localhost:8081/admin/goods/excel","on-success":e.handleAvatarSuccess,data:e.uploadData,"before-upload":e.xlsbeforeUpload,headers:e.headers}},[t("el-button",{attrs:{type:"primary"}},[e._v("xls上传商品")]),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"文件格式前缀为类目id eg:123456goods.xls",placement:"top-start"}},[t("i",{staticClass:"el-icon-question"})])],1)],1),e._v(" "),t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"goods",attrs:{model:e.goods,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"商品名称",prop:"title"}},[t("el-input",{model:{value:e.goods.title,callback:function(o){e.$set(e.goods,"title",o)},expression:"goods.title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"商品图片",prop:"cover"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadPath,"show-file-list":!1,"on-success":e.uploadPicUrl,headers:e.headers,"before-upload":e.beforeUpload,"element-loading-text":"上传图片中",accept:".jpg,.jpeg,.png,.gif"}},[e.goods.cover?t("img",{staticClass:"avatar",attrs:{src:e.goods.cover}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"商品分类",prop:"categoryId"}},[t("el-cascader",{attrs:{options:e.options,props:{expandTrigger:"hover"}},on:{change:e.handleChange},model:{value:e.value,callback:function(o){e.value=o},expression:"value"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"商品描述"}},[t("el-input",{model:{value:e.goods.goodsDescribe,callback:function(o){e.$set(e.goods,"goodsDescribe",o)},expression:"goods.goodsDescribe"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"商品售价",prop:"sellPrice"}},[t("el-input",{model:{value:e.goods.sellPrice,callback:function(o){e.$set(e.goods,"sellPrice",o)},expression:"goods.sellPrice"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"特价商品"}},[t("el-switch",{model:{value:e.goods.special,callback:function(o){e.$set(e.goods,"special",o)},expression:"goods.special"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"商品原价",prop:"originPrice"}},[t("el-input",{model:{value:e.goods.originPrice,callback:function(o){e.$set(e.goods,"originPrice",o)},expression:"goods.originPrice"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"返现金额"}},[t("el-input",{model:{value:e.goods.returnCash,callback:function(o){e.$set(e.goods,"returnCash",o)},expression:"goods.returnCash"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"进货价格"}},[t("el-input",{model:{value:e.goods.purchasingPrice,callback:function(o){e.$set(e.goods,"purchasingPrice",o)},expression:"goods.purchasingPrice"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"进货单位"}},[t("el-input",{model:{value:e.goods.purchasingUnit,callback:function(o){e.$set(e.goods,"purchasingUnit",o)},expression:"goods.purchasingUnit"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"库存数量",prop:"stock"}},[t("el-input",{model:{value:e.goods.stock,callback:function(o){e.$set(e.goods,"stock",o)},expression:"goods.stock"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"规格"}},[t("el-input",{attrs:{placeholder:"不同规格用/分隔,eg:蓝色/红色"},model:{value:e.goods.options,callback:function(o){e.$set(e.goods,"options",o)},expression:"goods.options"}})],1)],1)],1),e._v(" "),t("div",{staticClass:"op-container"},[t("el-button",{on:{click:function(o){e.resetForm("goods")}}},[e._v("重置")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(o){e.create("goods")}}},[e._v("创建")])],1)],1)},[],!1,null,null,null);c.options.__file="create.vue";o.default=c.exports},PFre:function(e,o,t){"use strict";var s=t("7vFM");t.n(s).a},rs3x:function(e,o,t){"use strict";t.d(o,"a",function(){return s});t("t3Un");var s="http://localhost:8081/admin/storage/upload"},xA6U:function(e,o,t){"use strict";t.d(o,"a",function(){return r}),t.d(o,"c",function(){return a}),t.d(o,"d",function(){return l}),t.d(o,"b",function(){return n});var s=t("t3Un");function r(e){return Object(s.a)({url:"/goods/create",method:"post",data:e})}function a(e){return Object(s.a)({url:"/goods/list",method:"post",data:e})}function l(e){return Object(s.a)({url:"/goods/update",method:"post",data:e})}function n(e){return Object(s.a)({url:"/goods/delete",method:"post",data:e})}},xAVR:function(e,o,t){"use strict";t.d(o,"c",function(){return r}),t.d(o,"a",function(){return a}),t.d(o,"d",function(){return l}),t.d(o,"b",function(){return n});var s=t("t3Un");function r(e){return Object(s.a)({url:"/category/list",method:"get",params:e})}function a(e){return Object(s.a)({url:"/category/create",method:"post",data:e})}function l(e){return Object(s.a)({url:"/category/update",method:"post",data:e})}function n(e){return Object(s.a)({url:"/category/delete",method:"post",data:e})}}}]);