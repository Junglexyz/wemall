(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-25f1"],{AGa2:function(e,t,o){"use strict";var a=o("SYkV");o.n(a).a},D05h:function(e,t,o){"use strict";o.r(t);var a=o("xA6U"),l=o("rs3x"),s=o("xAVR"),i={data:function(){return{uploadPath:l.a,statuses:[{label:"全部",value:null},{label:"在售",value:1},{label:"下架",value:0}],listGoods:[],editGoods:[],listLoading:!0,dialogFormVisible:!1,currentPage:1,total:0,uploading:!1,value:[],options:[],categoryId:"",status:1}},created:function(){this.getList(),this.getCategory()},computed:{headers:function(){return{"X-Upload-Type":"goods"}}},methods:{getList:function(){var e=this,t=this.categoryId,o=this.status,l={page:this.currentPage,categoryId:t,status:o};console.log(l),Object(a.c)(l).then(function(t){console.log(t);var o=t.data;0==o.errno&&(e.listGoods=o.result.listGoods,e.total=o.result.total,e.listLoading=!1)}).catch(function(t){console.log(t),e.listLoading=!1})},handleUpdate:function(e){console.log(e),this.editGoods=e,this.dialogFormVisible=!0},uploadPicUrl:function(e){console.log(e),this.editGoods.cover=this.$store.getters.storagePath+"/goods/"+e.result,this.uploading=!1,console.log(this.editGoods.cover)},updateData:function(e){var t=this;"under"==e&&(this.editGoods.status=1==this.editGoods.status?0:1),this.editGoods.categoryId=this.categoryId,this.editGoods.special=this.editGoods.special?1:0,Object(a.d)(this.editGoods).then(function(e){0==e.data.errno&&(t.dialogFormVisible=!1,t.currentPage=1,t.getList(),t.$message({message:"更新成功！",type:"success"}),t.getList())}).catch(function(e){console.log(e),t.$message.error("更新失败！")})},cancel:function(){this.dialogFormVisible=!1},handleCurrentChange:function(e){console.log("当前改变："+e),this.currentPage=e,this.getList()},beforeUpload:function(e){console.log(e.type);var t="image/jpg"===e.type||"image/png"===e.type||"image/jpeg"===e.type,o=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG、JPEG 或 PNG 格式!"),o||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&o&&(this.uploading=!0),t&&o},errorUpload:function(){this.uploading=!1},handleChange:function(e){console.log(e),this.categoryId=e[1]},search:function(){this.getList()},getCategory:function(){var e=this;Object(s.c)().then(function(t){var o=t.data;if(console.log(o),0==o.errno){for(var a=o.result,l=[],s=0;s<a.length;s++){for(var i=[],n=a[s].children,r=0;r<n.length;r++){var c={label:n[r].name,value:n[r].id};i.push(c)}var d={label:a[s].name,value:a[s].id,children:i};l.push(d)}l.push({label:"全部",value:"",children:[{label:"全部",value:""}]}),console.log(l),e.options=l}}).catch(function(t){console.log(t),e.listLoading=!1})},handleDelete:function(e){var t=this;this.$confirm("确认删除此商品?","删除商品",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o={goodsId:e.goodsId};console.log(o),Object(a.b)(o).then(function(e){console.log(e),0==e.data.errno&&(t.getList(),t.$message({type:"success",message:"删除成功!"}))}).catch(function(e){console.log(e),t.$message({type:"danger",message:"删除失败!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},n=(o("AGa2"),o("ZrdR")),r=Object(n.a)(i,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("h4",[e._v("商品列表")]),e._v(" "),o("el-card",[o("el-cascader",{attrs:{options:e.options,props:{expandTrigger:"hover"}},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._v(" "),o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statuses,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("立即查找")])],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.listGoods}},[o("el-table-column",{attrs:{prop:"title",label:"名称"}}),e._v(" "),o("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?o("el-tag",{attrs:{type:"primary",width:"40"}},[e._v("在售")]):e._e(),e._v(" "),0==t.row.status?o("el-tag",{attrs:{type:"danger",width:"40"}},[e._v("下架中")]):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"cover",label:"封面图"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.cover?o("img",{attrs:{src:t.row.cover,width:"40"}}):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"sellPrice",label:"售价"}}),e._v(" "),o("el-table-column",{attrs:{prop:"special",label:"是否特价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t        \t"+e._s(t.row.special?"是":"否")+"\n\t        ")]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"originPrice",label:"原价"}}),e._v(" "),o("el-table-column",{attrs:{prop:"returnCash",label:"返现金额"}}),e._v(" "),o("el-table-column",{attrs:{prop:"purchasingPrice",label:"进货价格"}}),e._v(" "),o("el-table-column",{attrs:{prop:"purchasingUnit",label:"进货单位"}}),e._v(" "),o("el-table-column",{attrs:{prop:"stock",label:"库存数量"}}),e._v(" "),o("el-table-column",{attrs:{prop:"options",label:"规格"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){e.handleUpdate(t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(o){e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),o("div",[o("el-pagination",{attrs:{background:"","current-page":e.currentPage,layout:"total,prev, pager, next",total:e.total,"page-size":10},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),o("el-dialog",{attrs:{title:"编辑商品",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"editGoods",attrs:{model:e.editGoods,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"商品名称"}},[o("el-input",{model:{value:e.editGoods.title,callback:function(t){e.$set(e.editGoods,"title",t)},expression:"editGoods.title"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品描述"}},[o("el-input",{model:{value:e.editGoods.goodsDescrible,callback:function(t){e.$set(e.editGoods,"goodsDescrible",t)},expression:"editGoods.goodsDescrible"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品图片"}},[o("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.uploading,expression:"uploading"}],staticClass:"avatar-uploader",attrs:{action:e.uploadPath,"show-file-list":!1,"on-success":e.uploadPicUrl,headers:e.headers,"before-upload":e.beforeUpload,"on-error":e.errorUpload,"element-loading-text":"上传图片中",accept:".jpg,.jpeg,.png,.gif"}},[e.editGoods.cover?o("img",{staticClass:"avatar",attrs:{src:e.editGoods.cover}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),o("el-form-item",{attrs:{label:"商品分类",prop:"categoryId"}},[o("el-cascader",{attrs:{options:e.options,props:{expandTrigger:"hover"}},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品售价",prop:"sellPrice"}},[o("el-input",{model:{value:e.editGoods.sellPrice,callback:function(t){e.$set(e.editGoods,"sellPrice",t)},expression:"editGoods.sellPrice"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品原价",prop:"originPrice"}},[o("el-input",{model:{value:e.editGoods.originPrice,callback:function(t){e.$set(e.editGoods,"originPrice",t)},expression:"editGoods.originPrice"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"特价商品"}},[o("el-switch",{model:{value:e.editGoods.special,callback:function(t){e.$set(e.editGoods,"special",t)},expression:"editGoods.special"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"返现金额"}},[o("el-input",{model:{value:e.editGoods.returnCash,callback:function(t){e.$set(e.editGoods,"returnCash",t)},expression:"editGoods.returnCash"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"进货价格"}},[o("el-input",{model:{value:e.editGoods.purchasingPrice,callback:function(t){e.$set(e.editGoods,"purchasingPrice",t)},expression:"editGoods.purchasingPrice"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"进货单位"}},[o("el-input",{model:{value:e.editGoods.purchasingUnit,callback:function(t){e.$set(e.editGoods,"purchasingUnit",t)},expression:"editGoods.purchasingUnit"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"库存数量",prop:"stock"}},[o("el-input",{model:{value:e.editGoods.stock,callback:function(t){e.$set(e.editGoods,"stock",t)},expression:"editGoods.stock"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"规格"}},[o("el-input",{attrs:{placeholder:"不同规格用/分隔,eg:蓝色/红色"},model:{value:e.editGoods.options,callback:function(t){e.$set(e.editGoods,"options",t)},expression:"editGoods.options"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateData("under")}}},[e._v(e._s(1==e.editGoods.status?"下架":"上架"))]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.updateData}},[e._v("确定")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="list.vue";t.default=r.exports},SYkV:function(e,t,o){},rs3x:function(e,t,o){"use strict";o.d(t,"a",function(){return a});o("t3Un");var a="http://localhost:8081/admin/storage/upload"},xA6U:function(e,t,o){"use strict";o.d(t,"a",function(){return l}),o.d(t,"c",function(){return s}),o.d(t,"d",function(){return i}),o.d(t,"b",function(){return n});var a=o("t3Un");function l(e){return Object(a.a)({url:"/goods/create",method:"post",data:e})}function s(e){return Object(a.a)({url:"/goods/list",method:"post",data:e})}function i(e){return Object(a.a)({url:"/goods/update",method:"post",data:e})}function n(e){return Object(a.a)({url:"/goods/delete",method:"post",data:e})}},xAVR:function(e,t,o){"use strict";o.d(t,"c",function(){return l}),o.d(t,"a",function(){return s}),o.d(t,"d",function(){return i}),o.d(t,"b",function(){return n});var a=o("t3Un");function l(e){return Object(a.a)({url:"/category/list",method:"get",params:e})}function s(e){return Object(a.a)({url:"/category/create",method:"post",data:e})}function i(e){return Object(a.a)({url:"/category/update",method:"post",data:e})}function n(e){return Object(a.a)({url:"/category/delete",method:"post",data:e})}}}]);